<!DOCTYPE html>
<html>
<head>
  <title>KinesisUi Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag "kinesis_ui/application", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>
</head>
<body class="bg-gray-50 min-h-screen">
  <div class="container mx-auto px-4 py-8">
    <header class="text-center mb-12">
      <h1 class="text-4xl font-bold text-gray-900 mb-4">KinesisUi Demo</h1>
      <p class="text-lg text-gray-600">Componentes UI para Rails com Tailwind CSS e Stimulus</p>
    </header>

    <!-- Botões de Exemplo -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Botões</h2>
      <div class="space-y-4">
        <div class="flex flex-wrap gap-4">
          <%= kinesis_button "Primário", variant: :primary %>
          <%= kinesis_button "Secundário", variant: :secondary %>
          <%= kinesis_button "Perigo", variant: :danger %>
          <%= kinesis_button "Sucesso", variant: :success %>
        </div>
        
        <div class="flex flex-wrap gap-4 items-center">
          <%= kinesis_button "Pequeno", variant: :primary, size: :small %>
          <%= kinesis_button "Médio", variant: :primary, size: :medium %>
          <%= kinesis_button "Grande", variant: :primary, size: :large %>
        </div>
      </div>
    </section>

    <!-- Modais de Exemplo -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Modais</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        
        <!-- Modal Básico -->
        <div class="bg-white p-6 rounded-lg shadow">
          <h3 class="text-lg font-semibold mb-3">Modal Básico</h3>
          <p class="text-gray-600 mb-4">Modal simples com título e corpo</p>
          <%= kinesis_modal(
            title: "Informação",
            body: "Este é um modal básico com informações importantes.",
            trigger_text: "Abrir Modal Básico"
          ) %>
        </div>

        <!-- Modal de Confirmação -->
        <div class="bg-white p-6 rounded-lg shadow">
          <h3 class="text-lg font-semibold mb-3">Modal de Confirmação</h3>
          <p class="text-gray-600 mb-4">Modal com ação de confirmação</p>
          <%= kinesis_modal(
            title: "Confirmar Ação",
            body: "Você tem certeza que deseja deletar este item?",
            trigger_text: "Deletar Item",
            confirm_action: true,
            confirm_text: "Sim, deletar",
            close_text: "Cancelar"
          ) %>
        </div>

        <!-- Modal com Conteúdo Personalizado -->
        <div class="bg-white p-6 rounded-lg shadow">
          <h3 class="text-lg font-semibold mb-3">Modal Personalizado</h3>
          <p class="text-gray-600 mb-4">Modal com formulário personalizado</p>
          <%= kinesis_modal(title: "Criar Usuário", trigger_text: "Novo Usuário") do %>
            <%= form_with url: create_user_home_index_path, method: :post, class: "space-y-4" do |f| %>
              <div>
                <%= f.label :name, "Nome", class: "block text-sm font-medium text-gray-700 mb-1" %>
                <%= f.text_field :name, class: "w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500", placeholder: "Digite o nome" %>
              </div>
              <div>
                <%= f.label :email, "Email", class: "block text-sm font-medium text-gray-700 mb-1" %>
                <%= f.email_field :email, class: "w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500", placeholder: "Digite o email" %>
              </div>
              <div class="flex justify-end space-x-2">
                <button type="button" data-action="click->modal#close" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">
                  Cancelar
                </button>
                <%= f.submit "Salvar", class: "px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700" %>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    </section>

    <!-- Lista de Usuários -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Lista de Usuários</h2>
      <div class="bg-white rounded-lg shadow overflow-hidden">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Nome
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Email
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Ações
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% @users.each do |user| %>
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900"><%= user[:name] %></div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-500"><%= user[:email] %></div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                  <%= kinesis_button "Ver", variant: :secondary, size: :small %>
                  
                  <%= kinesis_modal(
                    title: "Confirmar Exclusão",
                    body: "Você tem certeza que deseja deletar o usuário #{user[:name]}?",
                    trigger_text: "Deletar",
                    confirm_action: true,
                    confirm_text: "Sim, deletar",
                    close_text: "Cancelar"
                  ) %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Exemplos de Eventos JavaScript -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Eventos JavaScript</h2>
      <div class="bg-white p-6 rounded-lg shadow">
        <p class="text-gray-600 mb-4">Este modal demonstra os eventos JavaScript personalizados:</p>
        
        <%= kinesis_modal(
          title: "Modal com Eventos",
          body: "Abra o console do navegador para ver os eventos sendo disparados.",
          trigger_text: "Testar Eventos",
          confirm_action: true,
          confirm_text: "Confirmar Teste"
        ) %>
        
        <div class="mt-4 p-4 bg-gray-100 rounded">
          <h4 class="font-medium mb-2">Eventos disponíveis:</h4>
          <ul class="text-sm text-gray-600 space-y-1">
            <li>• <code>modal:opened</code> - Disparado quando o modal é aberto</li>
            <li>• <code>modal:closed</code> - Disparado quando o modal é fechado</li>
            <li>• <code>modal:confirmed</code> - Disparado quando o usuário confirma uma ação</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Exemplo de Uso via Render -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Uso via Render</h2>
      <div class="bg-white p-6 rounded-lg shadow">
        <p class="text-gray-600 mb-4">Exemplo usando <code>render</code> diretamente:</p>
        
        <%= render "kinesis_ui/components/modal",
            title: "Modal via Render",
            body: "Este modal foi criado usando render diretamente, sem o helper.",
            trigger_text: "Abrir via Render"
        %>
        
        <div class="mt-4 p-4 bg-gray-100 rounded">
          <pre class="text-sm"><code>&lt;%= render "kinesis_ui/components/modal",
    title: "Modal via Render",
    body: "Conteúdo do modal",
    trigger_text: "Abrir Modal"
%&gt;</code></pre>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="text-center py-8 border-t border-gray-200">
      <p class="text-gray-600">
        KinesisUi Demo - 
        <a href="https://github.com/ViniciusLisboa07/kinesis_ui" class="text-blue-600 hover:text-blue-800">
          GitHub Repository
        </a>
      </p>
    </footer>
  </div>

  <!-- JavaScript para demonstrar eventos -->
  <script>
    document.addEventListener("modal:opened", (event) => {
      console.log("Modal aberto:", event);
    });

    document.addEventListener("modal:closed", (event) => {
      console.log("Modal fechado:", event);
    });

    document.addEventListener("modal:confirmed", (event) => {
      console.log("Ação confirmada:", event);
      alert("Ação confirmada! Verifique o console para mais detalhes.");
    });
  </script>
</body>
</html>